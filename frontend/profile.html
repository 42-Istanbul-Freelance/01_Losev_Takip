<!DOCTYPE html>
<html lang="tr" class="scroll-smooth">
<head>
    <meta charset="UTF-8" />
    <title>LÖSEV İnci - Profilim</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        losev: {
                            red: '#d62828',
                            redSoft: '#fcd5ce',
                            redDark: '#9e0000',
                            green: '#2e7d32',
                            greenSoft: '#e8f5e9',
                            orange: '#f77f00',
                            blue: '#457b9d',
                        }
                    },
                    fontFamily: { sans: ['Outfit', 'sans-serif'] },
                },
            },
        };
    </script>
    <style>
        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid rgba(226, 232, 240, 0.8);
            box-shadow: 0 4px 20px 0 rgba(0, 0, 0, 0.03);
            border-radius: 1.5rem;
        }
        .form-input {
            width: 100%;
            border-radius: 0.75rem;
            border: 1px solid #e2e8f0;
            background: #f8fafc;
            padding: 0.75rem 1rem;
            font-size: 0.875rem;
            outline: none;
            transition: all 0.2s;
        }
        .form-input:focus {
            background: #fff;
            border-color: #d62828;
            box-shadow: 0 0 0 4px rgba(214, 40, 40, 0.1);
        }
        .badge-card {
            background: linear-gradient(135deg, #fef2f2 0%, #ffffff 100%);
            border: 2px solid #fee2e2;
        }
        .badge-bronz { background: linear-gradient(135deg, #fef3c7 0%, #fbbf24 100%); border-color: #f59e0b; }
        .badge-gumus { background: linear-gradient(135deg, #f3f4f6 0%, #9ca3af 100%); border-color: #6b7280; }
        .badge-altin { background: linear-gradient(135deg, #fef9c3 0%, #facc15 100%); border-color: #eab308; }
        .badge-platin { background: linear-gradient(135deg, #ecfeff 0%, #06b6d4 100%); border-color: #0891b2; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 font-sans min-h-screen">

    <!-- Header -->
    <header class="bg-white border-b border-slate-200 sticky top-0 z-40">
        <div class="max-w-5xl mx-auto px-4 sm:px-6 py-4 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-xl bg-losev-red text-white flex items-center justify-center font-black">L</div>
                <h1 class="font-black text-slate-800">LÖSEV İNCİ</h1>
            </div>
            <div class="flex items-center gap-3">
                <a href="dashboard.html" class="px-4 py-2 rounded-lg text-sm font-semibold text-slate-600 hover:bg-slate-100 transition">← Panele Dön</a>
                <button onclick="logout()" class="px-4 py-2 rounded-lg text-sm font-semibold text-losev-red hover:bg-losev-redSoft transition">Çıkış</button>
            </div>
        </div>
    </header>

    <main class="max-w-5xl mx-auto px-4 sm:px-6 py-8">
        <div class="grid md:grid-cols-3 gap-6">
            <!-- Profile Sidebar -->
            <div class="md:col-span-1 space-y-6">
                <!-- Profile Card -->
                <div class="glass-card p-6 text-center">
                    <div class="w-24 h-24 rounded-full bg-losev-red text-white flex items-center justify-center text-3xl font-black mx-auto mb-4" id="profileInitials">--</div>
                    <h2 class="text-xl font-bold text-slate-800" id="profileName">--</h2>
                    <p class="text-sm text-slate-500" id="profileSchool">--</p>
                    <div class="mt-4 pt-4 border-t border-slate-100">
                        <p class="text-xs font-bold text-slate-400 uppercase tracking-wider">Rozet Seviyesi</p>
                        <div id="badgeContainer" class="mt-2">
                            <span class="inline-block px-4 py-2 rounded-full text-sm font-bold bg-slate-100 text-slate-600">Henüz rozet yok</span>
                        </div>
                    </div>
                </div>

                <!-- Summary Stats -->
                <div class="glass-card p-6 space-y-4">
                    <h3 class="font-bold text-slate-800 text-sm uppercase tracking-wider">Gönüllülük Özeti</h3>
                    <div class="flex justify-between items-center p-3 bg-slate-50 rounded-lg">
                        <span class="text-sm text-slate-600">Toplam Saat</span>
                        <span class="text-xl font-black text-losev-blue" id="totalHours">0</span>
                    </div>
                    <div class="flex justify-between items-center p-3 bg-slate-50 rounded-lg">
                        <span class="text-sm text-slate-600">Yıllık</span>
                        <span class="text-lg font-bold text-slate-700" id="yearlyHours">0</span>
                    </div>
                    <div class="flex justify-between items-center p-3 bg-slate-50 rounded-lg">
                        <span class="text-sm text-slate-600">Aylık</span>
                        <span class="text-lg font-bold text-slate-700" id="monthlyHours">0</span>
                    </div>
                    <div class="flex justify-between items-center p-3 bg-losev-redSoft/30 rounded-lg">
                        <span class="text-sm text-losev-red font-medium">Hedef</span>
                        <span class="text-lg font-bold text-losev-red" id="targetHours">40</span>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="glass-card p-6 space-y-3">
                    <h3 class="font-bold text-slate-800 text-sm uppercase tracking-wider">Hızlı İşlemler</h3>
                    <button onclick="generateReport()" class="w-full py-3 px-4 bg-losev-blue text-white rounded-xl font-semibold hover:bg-losev-blue/90 transition flex items-center justify-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                        Üniversite Raporu Al
                    </button>
                    <button onclick="showPasswordModal()" class="w-full py-3 px-4 bg-white border border-slate-200 text-slate-700 rounded-xl font-semibold hover:bg-slate-50 transition">
                        Şifre Değiştir
                    </button>
                </div>
            </div>

            <!-- Main Content -->
            <div class="md:col-span-2 space-y-6">
                <!-- Profile Edit Form -->
                <div class="glass-card p-6">
                    <h3 class="text-lg font-bold text-slate-800 mb-4">Profil Bilgilerim</h3>
                    <form id="profileForm" onsubmit="event.preventDefault(); saveProfile();" class="space-y-4">
                        <div class="grid md:grid-cols-2 gap-4">
                            <div>
                                <label class="text-sm font-semibold text-slate-600 block mb-1">Ad</label>
                                <input type="text" id="firstName" class="form-input" required />
                            </div>
                            <div>
                                <label class="text-sm font-semibold text-slate-600 block mb-1">Soyad</label>
                                <input type="text" id="lastName" class="form-input" required />
                            </div>
                        </div>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div>
                                <label class="text-sm font-semibold text-slate-600 block mb-1">E-posta</label>
                                <input type="email" id="email" class="form-input" required />
                            </div>
                            <div>
                                <label class="text-sm font-semibold text-slate-600 block mb-1">Telefon</label>
                                <input type="tel" id="phone" class="form-input" />
                            </div>
                        </div>
                        <div>
                            <label class="text-sm font-semibold text-slate-600 block mb-1">Okul</label>
                            <input type="text" id="schoolName" class="form-input" />
                        </div>
                        <div class="grid md:grid-cols-3 gap-4">
                            <div>
                                <label class="text-sm font-semibold text-slate-600 block mb-1">İl</label>
                                <input type="text" id="city" class="form-input" />
                            </div>
                            <div>
                                <label class="text-sm font-semibold text-slate-600 block mb-1">İlçe</label>
                                <input type="text" id="district" class="form-input" />
                            </div>
                            <div>
                                <label class="text-sm font-semibold text-slate-600 block mb-1">Sınıf</label>
                                <input type="text" id="grade" class="form-input" />
                            </div>
                        </div>
                        <div>
                            <label class="text-sm font-semibold text-slate-600 block mb-1">Koordinatör Öğretmen</label>
                            <input type="text" id="coordinatorTeacherName" class="form-input" />
                        </div>

                        <!-- Veli İzini Bölümü -->
                        <div class="mt-6 pt-6 border-t border-slate-100">
                            <h4 class="font-bold text-slate-800 mb-3">Veli İzni (KVKK)</h4>
                            <div class="flex items-start gap-3 p-4 bg-amber-50 rounded-xl border border-amber-100">
                                <input type="checkbox" id="parentConsent" class="mt-1 w-4 h-4 rounded border-amber-300 text-losev-red focus:ring-losev-red" />
                                <div>
                                    <label for="parentConsent" class="text-sm font-medium text-slate-700 cursor-pointer">
                                        Veli/Vasisi olduğum çocuğun kişisel verilerinin LÖSEV tarafından işlenmesine izin veriyorum.
                                    </label>
                                    <p class="text-xs text-slate-500 mt-1">Bu izin, üniversite başvurularında kullanılacak gönüllülük belgesi oluşturulabilmesi için gereklidir.</p>
                                </div>
                            </div>
                            <div class="mt-3">
                                <label class="text-sm font-semibold text-slate-600 block mb-1">Veli/Vasi Telefon</label>
                                <input type="tel" id="parentPhone" class="form-input" placeholder="Veli/Vasi iletişim numarası" />
                            </div>
                        </div>

                        <div class="flex justify-end pt-4">
                            <button type="submit" id="saveBtn" class="px-6 py-3 bg-losev-red text-white rounded-xl font-semibold hover:bg-losev-redDark transition">
                                Değişiklikleri Kaydet
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Activities List -->
                <div class="glass-card p-6">
                    <h3 class="text-lg font-bold text-slate-800 mb-4">Faaliyetlerim</h3>
                    <div class="overflow-x-auto">
                        <table class="w-full text-left">
                            <thead class="bg-slate-50">
                                <tr class="text-xs font-bold text-slate-500 uppercase">
                                    <th class="py-3 px-3">Tarih</th>
                                    <th class="py-3 px-3">Tür</th>
                                    <th class="py-3 px-3 text-center">Saat</th>
                                    <th class="py-3 px-3 text-center">Durum</th>
                                </tr>
                            </thead>
                            <tbody id="activitiesTable" class="divide-y divide-slate-100">
                                <tr><td colspan="4" class="py-8 text-center text-slate-400">Yükleniyor...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Password Modal -->
    <div id="passwordModal" class="fixed inset-0 bg-black/50 z-50 hidden items-center justify-center">
        <div class="bg-white rounded-2xl p-6 w-full max-w-md mx-4">
            <h3 class="text-lg font-bold text-slate-800 mb-4">Şifre Değiştir</h3>
            <form id="passwordForm" onsubmit="event.preventDefault(); changePassword();" class="space-y-4">
                <div>
                    <label class="text-sm font-semibold text-slate-600 block mb-1">Mevcut Şifre</label>
                    <input type="password" id="currentPassword" class="form-input" required />
                </div>
                <div>
                    <label class="text-sm font-semibold text-slate-600 block mb-1">Yeni Şifre</label>
                    <input type="password" id="newPassword" class="form-input" required minlength="6" />
                </div>
                <div>
                    <label class="text-sm font-semibold text-slate-600 block mb-1">Yeni Şifre (Tekrar)</label>
                    <input type="password" id="confirmPassword" class="form-input" required />
                </div>
                <div class="flex gap-3 pt-4">
                    <button type="button" onclick="hidePasswordModal()" class="flex-1 py-3 bg-slate-100 text-slate-700 rounded-xl font-semibold hover:bg-slate-200 transition">İptal</button>
                    <button type="submit" id="passwordBtn" class="flex-1 py-3 bg-losev-red text-white rounded-xl font-semibold hover:bg-losev-redDark transition">Değiştir</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Report Modal -->
    <div id="reportModal" class="fixed inset-0 bg-black/50 z-50 hidden items-center justify-center overflow-y-auto">
        <div class="bg-white rounded-2xl p-6 w-full max-w-3xl mx-4 my-8">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-lg font-bold text-slate-800">LÖSEV İnci Gönüllülük Raporu</h3>
                <button onclick="hideReportModal()" class="text-slate-400 hover:text-slate-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            <div id="reportContent" class="space-y-6 max-h-[60vh] overflow-y-auto pr-2">
                <!-- Report content will be inserted here -->
            </div>
            <div class="flex justify-end gap-3 pt-6 mt-6 border-t border-slate-100">
                <button onclick="hideReportModal()" class="px-4 py-2 text-slate-600 hover:text-slate-800 font-medium">Kapat</button>
                <button onclick="printReport()" class="px-6 py-2 bg-losev-red text-white rounded-lg font-semibold hover:bg-losev-redDark transition">
                    Yazdır / PDF olarak kaydet
                </button>
            </div>
        </div>
    </div>

    <script>
        const API_BASE = '/api';
        let currentStudentId = null;
        let studentData = null;

        // Get student ID from URL or localStorage
        const urlParams = new URLSearchParams(window.location.search);
        const urlId = urlParams.get('id');
        const authUser = localStorage.getItem('auth_user');

        if (urlId) {
            currentStudentId = urlId;
        } else if (authUser) {
            const user = JSON.parse(authUser);
            if (user.role === 'student') {
                currentStudentId = user.id;
            } else {
                window.location.href = 'dashboard.html';
            }
        } else {
            window.location.href = 'login.html';
        }

        document.addEventListener('DOMContentLoaded', () => {
            loadProfile();
            loadActivities();
        });

        async function apiRequest(endpoint, method = 'GET', body = null) {
            const opts = { method, headers: {} };
            if (body) {
                opts.headers['Content-Type'] = 'application/json';
                opts.body = JSON.stringify(body);
            }
            const res = await fetch(API_BASE + endpoint, opts);
            const data = await res.json().catch(() => ({}));
            if (!res.ok) throw new Error(data.error || 'Bir hata oluştu');
            return data;
        }

        async function loadProfile() {
            try {
                const data = await apiRequest(`/profile/${currentStudentId}`);
                studentData = data;

                // Update profile card
                document.getElementById('profileName').textContent = `${data.student.firstName} ${data.student.lastName}`;
                document.getElementById('profileSchool').textContent = data.student.schoolName || '-';
                document.getElementById('profileInitials').textContent = `${data.student.firstName[0]}${data.student.lastName[0]}`;

                // Update badge
                const badgeColors = {
                    bronz: 'badge-bronz',
                    gumus: 'badge-gumus',
                    altin: 'badge-altin',
                    platin: 'badge-platin',
                    none: ''
                };

                const badgeContainer = document.getElementById('badgeContainer');
                if (data.badge.code !== 'none') {
                    badgeContainer.innerHTML = `
                        <div class="badge-card ${badgeColors[data.badge.code]} p-3 rounded-xl">
                            <p class="font-black text-slate-800">${data.badge.label}</p>
                            <p class="text-xs text-slate-600 mt-1">Tebrikler! Devam et.</p>
                        </div>
                    `;
                }

                // Update stats
                document.getElementById('totalHours').textContent = data.summary.total;
                document.getElementById('yearlyHours').textContent = data.summary.yearly;
                document.getElementById('monthlyHours').textContent = data.summary.monthly;
                document.getElementById('targetHours').textContent = data.student.targetHours || 40;

                // Fill form
                document.getElementById('firstName').value = data.student.firstName || '';
                document.getElementById('lastName').value = data.student.lastName || '';
                document.getElementById('email').value = data.student.email || '';
                document.getElementById('phone').value = data.student.phone || '';
                document.getElementById('schoolName').value = data.student.schoolName || '';
                document.getElementById('city').value = data.student.city || '';
                document.getElementById('district').value = data.student.district || '';
                document.getElementById('grade').value = data.student.grade || '';
                document.getElementById('coordinatorTeacherName').value = data.student.coordinatorTeacherName || '';
                document.getElementById('parentPhone').value = data.student.parentPhone || '';
                document.getElementById('parentConsent').checked = data.student.parentConsent === 1 || data.student.parentConsent === true;
            } catch (e) {
                showToast(e.message, 'error');
            }
        }

        async function saveProfile() {
            const btn = document.getElementById('saveBtn');
            btn.disabled = true;
            btn.textContent = 'Kaydediliyor...';

            try {
                const payload = {
                    firstName: document.getElementById('firstName').value,
                    lastName: document.getElementById('lastName').value,
                    email: document.getElementById('email').value,
                    phone: document.getElementById('phone').value,
                    schoolName: document.getElementById('schoolName').value,
                    city: document.getElementById('city').value,
                    district: document.getElementById('district').value,
                    grade: document.getElementById('grade').value,
                    coordinatorTeacherName: document.getElementById('coordinatorTeacherName').value,
                    parentPhone: document.getElementById('parentPhone').value,
                    parentConsent: document.getElementById('parentConsent').checked
                };

                await apiRequest(`/profile/${currentStudentId}`, 'PATCH', payload);
                showToast('Profil başarıyla güncellendi!');
                loadProfile();
            } catch (e) {
                showToast(e.message, 'error');
            } finally {
                btn.disabled = false;
                btn.textContent = 'Değişiklikleri Kaydet';
            }
        }

        async function loadActivities() {
            try {
                const activities = await apiRequest(`/profile/${currentStudentId}/activities`);
                const tbody = document.getElementById('activitiesTable');

                if (activities.length === 0) {
                    tbody.innerHTML = '<tr><td colspan="4" class="py-8 text-center text-slate-400">Henüz faaliyet kaydı yok</td></tr>';
                    return;
                }

                activities.sort((a, b) => new Date(b.date) - new Date(a.date));

                tbody.innerHTML = activities.map(a => {
                    const statusColors = { pending: 'text-yellow-600 bg-yellow-50', approved: 'text-green-600 bg-green-50', rejected: 'text-red-600 bg-red-50' };
                    const statusLabels = { pending: 'Bekliyor', approved: 'Onaylandı', rejected: 'Reddedildi' };
                    return `
                        <tr class="hover:bg-slate-50">
                            <td class="py-3 px-3 text-sm">${new Date(a.date).toLocaleDateString('tr-TR')}</td>
                            <td class="py-3 px-3 text-sm">${a.type}</td>
                            <td class="py-3 px-3 text-center font-bold">${a.hours}</td>
                            <td class="py-3 px-3 text-center">
                                <span class="px-2 py-1 rounded-full text-xs font-bold ${statusColors[a.status]}">${statusLabels[a.status]}</span>
                            </td>
                        </tr>
                    `;
                }).join('');
            } catch (e) {
                console.error('Activities error:', e);
            }
        }

        function showPasswordModal() {
            document.getElementById('passwordModal').classList.remove('hidden');
            document.getElementById('passwordModal').classList.add('flex');
        }

        function hidePasswordModal() {
            document.getElementById('passwordModal').classList.add('hidden');
            document.getElementById('passwordModal').classList.remove('flex');
            document.getElementById('passwordForm').reset();
        }

        async function changePassword() {
            const btn = document.getElementById('passwordBtn');
            btn.disabled = true;

            const current = document.getElementById('currentPassword').value;
            const newPass = document.getElementById('newPassword').value;
            const confirm = document.getElementById('confirmPassword').value;

            if (newPass !== confirm) {
                showToast('Yeni şifreler eşleşmiyor!', 'error');
                btn.disabled = false;
                return;
            }

            try {
                await apiRequest(`/profile/${currentStudentId}/change-password`, 'POST', {
                    currentPassword: current,
                    newPassword: newPass
                });
                showToast('Şifre başarıyla değiştirildi!');
                hidePasswordModal();
            } catch (e) {
                showToast(e.message, 'error');
            } finally {
                btn.disabled = false;
            }
        }

        async function generateReport() {
            try {
                const report = await apiRequest(`/reports/student-report/${currentStudentId}`);

                const content = document.getElementById('reportContent');
                content.innerHTML = `
                    <div class="bg-slate-50 p-6 rounded-xl">
                        <div class="text-center mb-6">
                            <h2 class="text-2xl font-black text-losev-red mb-2">LÖSEV İNCİ GÖNÜLLÜLÜK RAPORU</h2>
                            <p class="text-sm text-slate-500">Bu belge üniversite başvurularında kullanılabilir.</p>
                        </div>

                        <div class="grid md:grid-cols-2 gap-6 mb-6">
                            <div>
                                <h4 class="font-bold text-slate-800 mb-2">Öğrenci Bilgileri</h4>
                                <p class="text-sm"><strong>Ad Soyad:</strong> ${report.student.firstName} ${report.student.lastName}</p>
                                <p class="text-sm"><strong>Okul:</strong> ${report.student.schoolName || '-'}</p>
                                <p class="text-sm"><strong>Sınıf:</strong> ${report.student.grade || '-'}</p>
                                <p class="text-sm"><strong>İl/İlçe:</strong> ${report.student.city || '-'}/${report.student.district || '-'}</p>
                            </div>
                            <div>
                                <h4 class="font-bold text-slate-800 mb-2">Gönüllülük Özeti</h4>
                                <p class="text-sm"><strong>Toplam Saat:</strong> ${report.summary.total}</p>
                                <p class="text-sm"><strong>Onaylanan Faaliyet:</strong> ${report.activityCount}</p>
                                <p class="text-sm"><strong>Rozet Seviyesi:</strong> ${report.badge.label}</p>
                                <p class="text-sm"><strong>Rapor Tarihi:</strong> ${new Date(report.generatedAt).toLocaleDateString('tr-TR')}</p>
                            </div>
                        </div>

                        <h4 class="font-bold text-slate-800 mb-3">Onaylanan Faaliyetler</h4>
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm">
                                <thead class="bg-slate-100">
                                    <tr>
                                        <th class="py-2 px-3 text-left">Tarih</th>
                                        <th class="py-2 px-3 text-left">Tür</th>
                                        <th class="py-2 px-3 text-left">Açıklama</th>
                                        <th class="py-2 px-3 text-center">Saat</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-slate-100">
                                    ${report.activities.map(a => `
                                        <tr>
                                            <td class="py-2 px-3">${new Date(a.date).toLocaleDateString('tr-TR')}</td>
                                            <td class="py-2 px-3">${a.type}</td>
                                            <td class="py-2 px-3">${a.description || '-'}</td>
                                            <td class="py-2 px-3 text-center font-bold">${a.hours}</td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>

                        <div class="mt-6 p-4 bg-losev-redSoft/30 rounded-lg">
                            <p class="text-sm text-slate-700">
                                <strong>NOT:</strong> Bu belge Lösemili Çocuklar Vakfı (LÖSEV) İnci Gönüllülük Programı kapsamında otomatik olarak oluşturulmuştur.
                                Belgenin geçerliliği için veli/vasi izni kontrol edilmiştir.
                            </p>
                        </div>
                    </div>
                `;

                document.getElementById('reportModal').classList.remove('hidden');
                document.getElementById('reportModal').classList.add('flex');
            } catch (e) {
                showToast(e.message, 'error');
            }
        }

        function hideReportModal() {
            document.getElementById('reportModal').classList.add('hidden');
            document.getElementById('reportModal').classList.remove('flex');
        }

        function printReport() {
            window.print();
        }

        function logout() {
            localStorage.removeItem('auth_user');
            window.location.href = 'login.html';
        }

        function showToast(msg, type = 'success') {
            const toast = document.createElement('div');
            toast.className = `fixed bottom-4 right-4 px-6 py-4 rounded-xl shadow-xl font-bold text-sm z-50 ${type === 'error' ? 'bg-losev-red text-white' : 'bg-losev-green text-white'}`;
            toast.textContent = msg;
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 3000);
        }
    </script>
</body>
</html>
